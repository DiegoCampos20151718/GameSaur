{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\gamesaur\\\\components\\\\ChatList.tsx\",\n  _this = this;\nimport React, { useEffect, useState } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useToken } from './AuthService';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport ChatDetailScreen from './Chat';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Stack = createStackNavigator();\nvar ChatList = function ChatList(_ref) {\n  var navigation = _ref.navigation;\n  var token = useToken();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    chats = _useState2[0],\n    setChats = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  useEffect(function () {\n    var fetchChats = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          setLoading(true);\n          var storedUserId = yield AsyncStorage.getItem('userId');\n          if (storedUserId) {\n            var userId = BigInt(storedUserId);\n            var response = yield axios.get(`http://localhost/geingeemu/public/api/loadchats/${userId}`, {\n              headers: {\n                'Authorization': `Bearer ${token}`\n              }\n            });\n            console.log('Chats recibidos:', response.data);\n            setChats(response.data);\n          }\n        } catch (error) {\n          console.error('Error al cargar los chats:', error);\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function fetchChats() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchChats();\n  }, [token]);\n  var navigateToChatDetail = function navigateToChatDetail(chatId, chatData) {\n    navigation.navigate('ChatDetails', {\n      chatId: chatId,\n      chatData: chatData\n    });\n  };\n  var renderCard = function renderCard(_ref3) {\n    var item = _ref3.item;\n    return _jsxDEV(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigateToChatDetail(item.id, item.chat);\n      },\n      children: _jsxDEV(View, {\n        style: styles.card,\n        children: [_jsxDEV(Text, {\n          style: styles.cardText,\n          children: [\"ID: \", item.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }, _this), _jsxDEV(Text, {\n          style: styles.cardText,\n          children: [\"User 1: \", item.id_user1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }, _this), _jsxDEV(Text, {\n          style: styles.cardText,\n          children: [\"User 2: \", item.id_user2]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }, _this), _jsxDEV(Text, {\n          style: styles.cardText,\n          children: [\"Videojuego: \", item.id_videogame]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }, _this), _jsxDEV(Text, {\n          style: styles.cardText,\n          children: [\"Fecha: \", item.date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }, _this);\n  };\n  if (loading) {\n    return _jsxDEV(Text, {\n      children: \"Cargando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 12\n    }, _this);\n  }\n  return _jsxDEV(FlatList, {\n    data: chats,\n    renderItem: renderCard,\n    keyExtractor: function keyExtractor(item) {\n      return item.id.toString();\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, _this);\n};\nvar ChatScreen = function ChatScreen() {\n  return _jsxDEV(Stack.Navigator, {\n    screenOptions: {\n      headerShown: false\n    },\n    children: [_jsxDEV(Stack.Screen, {\n      name: \"Chats\",\n      component: ChatList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, _this), _jsxDEV(Stack.Screen, {\n      name: \"ChatDetails\",\n      component: ChatDetailScreen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, _this);\n};\nvar styles = StyleSheet.create({\n  card: {\n    backgroundColor: '#ffffff',\n    borderRadius: 8,\n    padding: 16,\n    marginTop: 16,\n    marginHorizontal: 16,\n    shadowColor: '#000000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5\n  },\n  cardText: {\n    fontSize: 16,\n    marginBottom: 8\n  }\n});\nexport default ChatScreen;","map":{"version":3,"names":["React","useEffect","useState","FlatList","Text","View","TouchableOpacity","StyleSheet","axios","AsyncStorage","useToken","createStackNavigator","ChatDetailScreen","jsxDEV","_jsxDEV","Stack","ChatList","_ref","navigation","token","_useState","_useState2","_slicedToArray","chats","setChats","_useState3","_useState4","loading","setLoading","fetchChats","_ref2","_asyncToGenerator","storedUserId","getItem","userId","BigInt","response","get","headers","console","log","data","error","apply","arguments","navigateToChatDetail","chatId","chatData","navigate","renderCard","_ref3","item","onPress","id","chat","children","style","styles","card","cardText","fileName","_jsxFileName","lineNumber","columnNumber","_this","id_user1","id_user2","id_videogame","date","renderItem","keyExtractor","toString","ChatScreen","Navigator","screenOptions","headerShown","Screen","name","component","create","backgroundColor","borderRadius","padding","marginTop","marginHorizontal","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","fontSize","marginBottom"],"sources":["C:/xampp/htdocs/gamesaur/components/ChatList.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { FlatList, Text, View, TouchableOpacity, StyleSheet } from 'react-native';\r\nimport axios from 'axios';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useToken } from './AuthService';\r\nimport { createStackNavigator } from '@react-navigation/stack';\r\nimport ChatDetailScreen from './Chat';\r\n\r\nconst Stack = createStackNavigator();\r\n\r\ninterface Chat {\r\n  id: number;\r\n  id_user1: number;\r\n  id_user2: number;\r\n  id_videogame: number;\r\n  chat: string;\r\n  date: string;\r\n}\r\n\r\nconst ChatList: React.FC = ({ navigation }) => {\r\n  const token = useToken();\r\n  const [chats, setChats] = useState<Chat[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchChats = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const storedUserId = await AsyncStorage.getItem('userId');\r\n        if (storedUserId) {\r\n          const userId = BigInt(storedUserId);\r\n          const response = await axios.get<Chat[]>(`http://localhost/geingeemu/public/api/loadchats/${userId}`, {\r\n            headers: { 'Authorization': `Bearer ${token}` },\r\n          });\r\n          console.log('Chats recibidos:', response.data);\r\n          setChats(response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error al cargar los chats:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchChats();\r\n  }, [token]);\r\n\r\n  const navigateToChatDetail = (chatId: number, chatData: string) => {\r\n    navigation.navigate('ChatDetails', { chatId, chatData });\r\n  };\r\n\r\n  const renderCard = ({ item }: { item: Chat }) => (\r\n    <TouchableOpacity onPress={() => navigateToChatDetail(item.id, item.chat)}>\r\n      <View style={styles.card}>\r\n        <Text style={styles.cardText}>ID: {item.id}</Text>\r\n        <Text style={styles.cardText}>User 1: {item.id_user1}</Text>\r\n        <Text style={styles.cardText}>User 2: {item.id_user2}</Text>\r\n        <Text style={styles.cardText}>Videojuego: {item.id_videogame}</Text>\r\n        <Text style={styles.cardText}>Fecha: {item.date}</Text>\r\n      </View>\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  if (loading) {\r\n    return <Text>Cargando...</Text>;\r\n  }\r\n\r\n  return (\r\n    <FlatList\r\n      data={chats}\r\n      renderItem={renderCard}\r\n      keyExtractor={(item) => item.id.toString()}\r\n    />\r\n  );\r\n};\r\n\r\nconst ChatScreen = () => {\r\n\r\n  return (\r\n    <Stack.Navigator\r\n      screenOptions={{\r\n        headerShown: false\r\n      }}\r\n    >\r\n      <Stack.Screen name=\"Chats\" component={ChatList} />\r\n      <Stack.Screen name=\"ChatDetails\" component={ChatDetailScreen} />\r\n    </Stack.Navigator>\r\n  );\r\n\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: 8,\r\n    padding: 16,\r\n    marginTop: 16,\r\n    marginHorizontal: 16,\r\n    shadowColor: '#000000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 4,\r\n    elevation: 5,\r\n  },\r\n  cardText: {\r\n    fontSize: 16,\r\n    marginBottom: 8,\r\n  },\r\n});\r\n\r\nexport default ChatScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}