{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\gamesaur\\\\components\\\\Chat.tsx\",\n  _this = this;\nimport React, { useEffect, useState } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ChatsScreen = function ChatsScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    chats = _useState2[0],\n    setChats = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userId = _useState4[0],\n    setUserId = _useState4[1];\n  useEffect(function () {\n    var fetchUserId = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var storedUserId = yield AsyncStorage.getItem('userId');\n        if (storedUserId) {\n          setUserId(BigInt(storedUserId));\n        }\n      });\n      return function fetchUserId() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchUserId();\n  }, []);\n  useEffect(function () {\n    var loadChats = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        try {\n          var response = yield axios.get(`http://localhost/geingeemu/public/loadchats/${userId}`);\n          setChats(response.data);\n        } catch (error) {\n          console.error('Error al cargar los chats:', error);\n        }\n      });\n      return function loadChats() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    console.log(chats);\n    loadChats();\n  }, [userId]);\n  var renderItem = function renderItem(_ref4) {\n    var item = _ref4.item;\n    return _jsxDEV(View, {\n      style: {\n        padding: 10\n      },\n      children: [_jsxDEV(Text, {\n        children: [\"ID: \", item.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 7\n      }, _this), _jsxDEV(Text, {\n        children: [\"User 1: \", item.id_user1]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }, _this), _jsxDEV(Text, {\n        children: [\"User 2: \", item.id_user2]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }, _this), _jsxDEV(Text, {\n        children: [\"Videojuego: \", item.id_videogame]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }, _this), _jsxDEV(Text, {\n        children: [\"Fecha: \", item.date]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }, _this), _jsxDEV(Text, {\n        children: \"Chat:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }, _this), _jsxDEV(FlatList, {\n        data: item.chat,\n        renderItem: function renderItem(_ref5) {\n          var chatItem = _ref5.item;\n          return _jsxDEV(View, {\n            style: {\n              marginLeft: 10\n            },\n            children: [_jsxDEV(Text, {\n              children: [\"Nombre: \", chatItem.nombre]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 13\n            }, _this), _jsxDEV(Text, {\n              children: [\"Mensaje: \", chatItem.mensaje]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 13\n            }, _this), _jsxDEV(Text, {\n              children: [\"Fecha: \", chatItem.fecha]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 13\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 11\n          }, _this);\n        },\n        keyExtractor: function keyExtractor(chatItem) {\n          return chatItem.fecha;\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }, _this);\n  };\n  return _jsxDEV(FlatList, {\n    data: chats,\n    renderItem: renderItem,\n    keyExtractor: function keyExtractor(item) {\n      return item.id.toString();\n    },\n    ListEmptyComponent: _jsxDEV(Text, {\n      children: \"No hay chats disponibles\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 27\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, _this);\n};\nexport default ChatsScreen;","map":{"version":3,"names":["React","useEffect","useState","FlatList","Text","View","axios","AsyncStorage","jsxDEV","_jsxDEV","ChatsScreen","_ref","navigation","_useState","_useState2","_slicedToArray","chats","setChats","_useState3","_useState4","userId","setUserId","fetchUserId","_ref2","_asyncToGenerator","storedUserId","getItem","BigInt","apply","arguments","loadChats","_ref3","response","get","data","error","console","log","renderItem","_ref4","item","style","padding","children","id","fileName","_jsxFileName","lineNumber","columnNumber","_this","id_user1","id_user2","id_videogame","date","chat","_ref5","chatItem","marginLeft","nombre","mensaje","fecha","keyExtractor","toString","ListEmptyComponent"],"sources":["C:/xampp/htdocs/gamesaur/components/Chat.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { FlatList, Text, View } from 'react-native';\r\nimport axios from 'axios';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\ninterface ChatMessage {\r\n  nombre: string;\r\n  mensaje: string;\r\n  fecha: string;\r\n}\r\n\r\ninterface Chat {\r\n  id: number;\r\n  id_user1: number;\r\n  id_user2: number;\r\n  id_videogame: number;\r\n  chat: ChatMessage[];\r\n  date: string;\r\n}\r\n\r\nconst ChatsScreen: React.FC = ({ navigation }) => {\r\n  const [chats, setChats] = useState<Chat[]>([]);\r\n  const [userId, setUserId] = useState<BigInteger | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUserId = async () => {\r\n      const storedUserId = await AsyncStorage.getItem('userId');\r\n      if (storedUserId) {\r\n        setUserId(BigInt(storedUserId));\r\n      }\r\n    };\r\n    fetchUserId();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const loadChats = async () => {\r\n      try {\r\n        const response = await axios.get<Chat[]>(`http://localhost/geingeemu/public/loadchats/${userId}`);\r\n        setChats(response.data);\r\n      } catch (error) {\r\n        console.error('Error al cargar los chats:', error);\r\n      }\r\n    };\r\n\r\n    console.log(chats);\r\n    loadChats();\r\n  }, [userId]);\r\n\r\n  const renderItem = ({ item }: { item: Chat }) => (\r\n    <View style={{ padding: 10 }}>\r\n      <Text>ID: {item.id}</Text>\r\n      <Text>User 1: {item.id_user1}</Text>\r\n      <Text>User 2: {item.id_user2}</Text>\r\n      <Text>Videojuego: {item.id_videogame}</Text>\r\n      <Text>Fecha: {item.date}</Text>\r\n      <Text>Chat:</Text>\r\n      <FlatList\r\n        data={item.chat}\r\n        renderItem={({ item: chatItem }) => (\r\n          <View style={{ marginLeft: 10 }}>\r\n            <Text>Nombre: {chatItem.nombre}</Text>\r\n            <Text>Mensaje: {chatItem.mensaje}</Text>\r\n            <Text>Fecha: {chatItem.fecha}</Text>\r\n          </View>\r\n        )}\r\n        keyExtractor={(chatItem) => chatItem.fecha}\r\n      />\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <FlatList\r\n      data={chats}\r\n      renderItem={renderItem}\r\n      keyExtractor={(item) => item.id.toString()}\r\n      ListEmptyComponent={<Text>No hay chats disponibles</Text>}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ChatsScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}